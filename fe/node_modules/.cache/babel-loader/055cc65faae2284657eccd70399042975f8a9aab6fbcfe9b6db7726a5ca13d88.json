{"ast":null,"code":"import _slicedToArray from\"D:/Ecom/fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../css/cartscreen.css\";// import axios from \"axios\";\nimport{useState}from\"react\";import{Navigate}from\"react-router-dom\";import{Button}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(){var _useState=useState(localStorage.getItem(\"cart\")?JSON.parse(localStorage.getItem(\"cart\")):[]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var handleRemove=function handleRemove(item){if(item.num===1){setCart(cart.filter(function(x){return x.product.name!==item.product.name;}));localStorage.setItem(\"cart\",JSON.stringify(cart.filter(function(x){return x.product.name!==item.product.name;})));}else{setCart(cart.map(function(x){if(x.product.name===item.product.name)x.num--;return x;}));localStorage.setItem(\"cart\",JSON.stringify(cart));}window.dispatchEvent(new Event(\"storage\"));};var formatter=new Intl.NumberFormat('en-US',{style:'currency',currency:'VND'});var toNum=function toNum(str){return Number(str.split(' ')[0].replace(/\\./g,''));};var sum=0;cart.forEach(function(x){sum+=toNum(x.product.priceOn)*x.num;});// const handlePay = async (e) => {\n//   e.preventDefault();\n//   try {\n//     const payment = await axios.post(\"http://localhost:8000/user/payment\", {\n//       amount: sum,\n//       orderId: `DONHANG${Math.floor(Math.random() * 100000)}`,\n//       orderInfo: \"DON HANG BKROBOTIC\",\n//     });\n//     if (payment.data.code === 200) {\n//       console.log(payment.data.data);\n//       window.location.replace(payment.data.data);\n//     }\n//   } catch (error) {\n//     console.log(\"Xay ra loi\");\n//     console.log(error);\n//   }\n// };\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-container\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"H\\xECnh \\u1EA3nh\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"S\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0110\\u01A1n Gi\\xE1\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"S\\u1ED1 l\\u01B0\\u1EE3ng\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"T\\xF9y ch\\u1EC9nh\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{className:index%2?\"RowEven\":\"RowOdd\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"cart-img\",src:item.product.image,alt:item.product.label})}),/*#__PURE__*/_jsx(\"td\",{children:item.product.name}),/*#__PURE__*/_jsx(\"td\",{children:item.product.priceOn}),/*#__PURE__*/_jsx(\"td\",{children:item.num}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"cart-row-remove\",onClick:function onClick(){return handleRemove(item);},children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../img/delete.png\"),alt:\"\"})})})]},index);})})]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"T\\u1ED5ng ti\\u1EC1n:\",formatter.format(sum)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkout\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"/checkout\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:// handlePay\nfunction onClick(){return/*#__PURE__*/_jsx(Navigate,{to:\"/checkout\"});},children:\"Thanh to\\xE1n\"}),\" \"]})})]});};export default CartScreen;","map":{"version":3,"names":["useState","Navigate","Button","CartScreen","localStorage","getItem","JSON","parse","cart","setCart","handleRemove","item","num","filter","x","product","name","setItem","stringify","map","window","dispatchEvent","Event","formatter","Intl","NumberFormat","style","currency","toNum","str","Number","split","replace","sum","forEach","priceOn","index","image","label","require","format"],"sources":["D:/Ecom/fe/src/components/CartScreen.jsx"],"sourcesContent":["import \"../css/cartscreen.css\";\n// import axios from \"axios\";\nimport { useState } from \"react\";\nimport {Navigate} from \"react-router-dom\";\nimport {Button} from \"react-bootstrap\";\n\nconst CartScreen = () => {\n\n  const [cart, setCart] = useState(\n    localStorage.getItem(\"cart\") ? JSON.parse(localStorage.getItem(\"cart\")) : []\n  );\n  const handleRemove = (item) => {\n    if (item.num === 1) {\n      setCart(cart.filter((x) => x.product.name !== item.product.name));\n      localStorage.setItem(\n        \"cart\",\n        JSON.stringify(cart.filter((x) => x.product.name !== item.product.name))\n      );\n    } else {\n      setCart(\n        cart.map((x) => {\n          if (x.product.name === item.product.name) x.num--;\n          return x;\n        })\n      );\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    }\n    window.dispatchEvent(new Event(\"storage\"));\n\n  };\n\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'VND',\n\n  });\n  const toNum=(str)=>{\n    return Number(str.split(' ')[0].replace(/\\./g,''))\n   }\n  let sum=0;\n\ncart.forEach(x=>{\nsum+=toNum(x.product.priceOn)*x.num\n})\n\n// const handlePay = async (e) => {\n//   e.preventDefault();\n//   try {\n    \n//     const payment = await axios.post(\"http://localhost:8000/user/payment\", {\n//       amount: sum,\n//       orderId: `DONHANG${Math.floor(Math.random() * 100000)}`,\n//       orderInfo: \"DON HANG BKROBOTIC\",\n//     });\n\n//     if (payment.data.code === 200) {\n//       console.log(payment.data.data);\n//       window.location.replace(payment.data.data);\n//     }\n//   } catch (error) {\n//     console.log(\"Xay ra loi\");\n//     console.log(error);\n//   }\n// };\n  return (\n    <div className=\"cart\">\n      <div className=\"table-container\">\n        <table className=\"table table-striped\">\n          <thead>\n            <tr>\n              <th scope=\"col\">#</th>\n              <th scope=\"col\">Hình ảnh</th>\n              <th scope=\"col\">Sản phẩm</th>\n              <th scope=\"col\">Đơn Giá</th>\n              <th scope=\"col\">Số lượng</th>\n              <th scope=\"col\">Tùy chỉnh</th>\n\n            </tr>\n          </thead>\n\n          <tbody>\n            {cart.map((item, index) => {\n              return (\n                <tr key={index} className={index%2?\"RowEven\":\"RowOdd\"}>\n                  <th scope=\"row\">{index + 1}</th>\n                  <td>\n                  <img\n                className=\"cart-img\"\n                src={item.product.image}\n                alt={item.product.label}\n              />\n                  </td>\n                  <td>\n                    {item.product.name}</td>\n                  <td>{item.product.priceOn}</td>\n                  <td>{item.num}</td>\n                  <td>\n\n                    <button\n              className=\"cart-row-remove\"\n              onClick={() => handleRemove(item)}\n            >\n              <img src={require(\"../img/delete.png\")} alt=\"\"></img>\n            </button>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n        <h5>Tổng tiền:{formatter.format(sum)}</h5>\n\n      </div>\n\n      <div className=\"checkout\">\n        <a href=\"/checkout\">\n          <Button variant=\"primary\" onClick={\n// handlePay\n             ()=><Navigate to='/checkout' />\n\n          }>Thanh toán</Button>{\" \"}\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default CartScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}